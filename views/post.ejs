<%- include('partials/header') %>

<main class="container">
  <!-- Show error if post is missing -->
  <% if (error) { %>
    <div class="alert alert-danger"><%= error %></div>
  <% } else { %>
    <!-- Optional message -->
    <% if (msg) { %>
      <div class="alert alert-<%= msg.type %>"><%= msg.text %></div>
    <% } %>

    <!-- Full post content -->
    <article class="post-item">
      <h1><%= post.title %></h1>
      <p class="post-meta">Posted on <%= post.createdAt.toLocaleString() %></p>
      <div class="post-content">
        <%= post.content.replace(/\n/g, '<br>') %>
      </div>
    </article>

    <!-- Action buttons: Edit and Delete -->
    <div class="actions">
      <a href="/posts/<%= post.id %>/edit" class="btn btn-primary">Edit</a>
      <form action="/posts/<%= post.id %>/delete" method="POST" onsubmit="return confirm('Delete this post?');" style="display:inline;">
        <button type="submit" class="btn btn-danger">Delete</button>
      </form>
    </div>
  <% } %>
</main>

<%- include('partials/footer') %>
