<%- include('partials/header') %>

<main class="container">
  <!-- Show error if post is missing -->
  <% if (error) { %>
    <div class="alert alert-danger"><%= error %></div>
  <% } else { %>

    <!-- Success or other message -->
    <% if (msg) { %>
      <div class="alert alert-success">
        <%= msg %>
      </div>
    <% } %>

    <!-- Full post content -->
    <article class="post-item">
      <h1><%= post.title %></h1>
      <p class="post-meta">
        Posted on <%= new Date(post.createdAt).toLocaleString('en-GB', {
          day: 'numeric',
          month: 'long',
          year: 'numeric',
          hour: '2-digit',
          minute: '2-digit'
        }) %> </p>

      <div class="post-content">
        <%- post.content.replace(/\n/g, '<br>') %>
      </div>
  </article>


    <!-- Action buttons: Edit and Delete -->
    <div class="actions">
      <a href="/posts/<%= post.id %>/edit" class="btn btn-primary">Edit</a>
      <button type="button" class="btn btn-danger" onclick="openDeleteModal('<%= post.id %>')">Delete</button>
    </div>

  <% } %>
</main>

<!-- Delete Confirmation Modal -->
<div id="delete-modal" class="modal hidden">
  <div class="modal-content">
    <h2>Confirm Deletion</h2>
    <p>Are you sure you want to delete this post?</p>
    <form id="delete-form" method="POST">
      <button type="submit" class="btn btn-danger">Yes, Delete</button>
      <button type="button" class="btn btn-primary" onclick="closeDeleteModal()">Cancel</button>
    </form>
  </div>
</div>

<%- include('partials/footer') %>
